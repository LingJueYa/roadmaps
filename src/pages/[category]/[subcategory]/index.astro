---
import { getCategories, getSubcategory } from "../../../utils/data";
import RoadmapList from "../../../components/roadmapList/RoadmapList.astro";

export async function getStaticPaths() {
  const categories = await getCategories();
  const paths: any = [];

  categories.forEach((category) => {
    category.subcategories.forEach((subcategory) => {
      paths.push({
        params: { category: category.name, subcategory: subcategory.name },
      });
    });
  });

  return paths;
}

const { category, subcategory } = Astro.params;
const subcategoryData = await getSubcategory(category, subcategory);
---

<RoadmapList
  category={category}
  subcategory={subcategory}
  roadmap={subcategoryData.roadmap}
/>
